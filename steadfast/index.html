<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Steadfast Easy Booking Tool</title>
	<link rel="icon" type="image/png" href="favicon-96x96.png"/>
	<link rel="shortcut icon" href="favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#f6f7f8; --card:#fff; --muted:#6b7280; --accent:#10b981; --danger:#ef4444; --border:#e6eef6; --text:#1f2937; }
    html,body{height:100%;}
    body{margin:0;padding:14px;background:var(--bg);font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;color:var(--text);}
    .wrap{max-width:940px;margin:8px auto;background:var(--card);padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.04);box-sizing:border-box}
    h1{font-size:18px;margin:0 0 8px}
    h2{font-size:15px;margin:0 0 8px;color:#374151}

    label{display:block;font-size:14px;margin-bottom:6px;color:#374151}
    input,textarea,select{width:100%;padding:8px 10px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;box-sizing:border-box;}
    textarea{min-height:76px;resize:vertical}

    .btn{display:inline-block;padding:7px 10px;border-radius:8px;border:0;cursor:pointer;font-weight:600;font-size:13px}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-secondary{background:#fff;color:#374151;border:1px solid #d1d5db}
    .btn[disabled]{opacity:0.6;cursor:not-allowed}

    .key-status{display:flex;align-items:center;justify-content:space-between;padding:6px 8px;border-radius:6px;font-size:13px}
    .key-status.error{background:#fff6f6;border:1px solid #fcdcdc;color:var(--danger)}
    .key-status.success{background:#f0fffa;border:1px solid #d1fae5;color:var(--accent)}
    .key-status .text{font-weight:600;font-size:13px}
    .key-status .small-btn{padding:5px 8px;font-size:12px;border-radius:6px}

    .notice{background:#fffbeb;border:1px solid #fef3c7;padding:10px;border-radius:8px}
    .form-panel{padding:12px;border:1px solid var(--border);border-radius:10px;background:#fbfdfe}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:720px){.grid{grid-template-columns:1fr}}
    .full{grid-column:1/-1}

    .response{margin-top:10px;padding:10px;border-radius:8px;background:#fff;border:1px solid var(--border)}
    .response h6{font-size:20px;font-weight:600;margin:6px 0;padding:10px;color: #000;background:#f7f7f7;border:1px solid #eee;border-radius:6px;display:flex;justify-content:space-between;align-items:center;font-family: "Poppins", sans-serif;}
    .copyable{flex:1;margin-right:10px;word-break:break-all;font-weight:700}

    .muted{color:var(--muted);font-size:13px}
    .small-note{font-size:12px;color:var(--muted);margin-top:8px}

    footer{margin-top:14px;text-align:center;color:var(--muted);font-size:13px}
    .footer-link{color:var(--accent);text-decoration:none;margin:0 5px;}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Steadfast Easy Booking Tool</h1>

    <section>
      <h2>‡ßß. Steadfast API ‡¶ï‡ßÄ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™</h2>
      <div id="keyStatus" class="key-status error" aria-live="polite">
        <div class="text" id="keyStatusText">‚ùå API ‡¶ï‡ßÄ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á‡•§ <a href="https://steadfast.com.bd/user/api" target="_blank">(‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßÅ‡¶®)</a></div>
        <div><button id="toggleKeyBtn" class="btn btn-secondary small-btn">‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</button></div>
      </div>

      <div id="keyDetails" class="form-panel" style="margin-top:8px">
        <div style="margin-bottom:8px">
          <label for="apiKey">API Key</label>
          <input id="apiKey" type="text" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ API Key">
        </div>
        <div style="margin-bottom:8px">
          <label for="secretKey">Secret Key</label>
          <input id="secretKey" type="text" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Secret Key">
        </div>
        <div style="display:flex;gap:8px">
          <button id="saveKeyBtn" class="btn btn-primary small-btn">‡¶∏‡ßá‡¶≠</button>
          <button id="clearKeyBtn" class="btn btn-secondary small-btn">‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®</button>
        </div>
        <div class="small-note">‚ö†Ô∏è  ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ: ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶¨‡¶ø‡¶¨‡ßá‡¶ö‡¶®‡¶æ‡ßü ‡¶ï‡ßÄ‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶ø ‡¶®‡¶æ‡•§ </div>
      </div>
    </section>

    <section style="margin-top:15px">
      <h2>‡ß®. ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
      <div class="notice" style="margin-bottom:10px">
        <label for="messageInput" style="font-weight:600">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</label>
        <textarea id="messageInput" placeholder="Customer Name (‡¶®‡¶æ‡¶Æ)&#10;Address Example, Dhaka. (‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ)&#10;01312345678 (‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤)&#10;500 (‡¶∏‡¶ø‡¶ì‡¶°‡¶ø ‡¶ü‡¶æ‡¶ï‡¶æ)"></textarea>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button id="processBtn" class="btn btn-primary">‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
          <button id="clearMsgBtn" class="btn btn-secondary">‡¶ï‡ßç‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞</button>
        </div>
      </div>

      <form id="orderForm" class="form-panel" onsubmit="return false">
        <p id="parseErr" class="small-note" style="color:var(--danger);display:none">‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§</p>
        <div class="grid">
          <div>
            <label for="invoice">‡¶á‡¶®‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ (Auto)</label>
            <input id="invoice" type="text" readonly>
          </div>
          <div>
            <label for="delivery">‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ß‡¶∞‡¶®</label>
            <select id="delivery"><option value="0">0. ‡¶π‡ßã‡¶Æ ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø</option><option value="1">1. ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶ø‡¶ï‡¶Ü‡¶™</option></select>
          </div>          
          <div class="full">
            <label for="name">‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
            <input id="name" type="text">
          </div>
          <div class="full">
            <label for="addr">‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶∞ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label>
            <input id="addr" type="text">
          </div>
          <div>
            <label for="phone">‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶∞ ‡¶´‡ßã‡¶®</label>
            <input id="phone" type="text">
          </div>
          <div>
            <label for="cod">COD ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
            <input id="cod" type="number" min="0">
          </div>
          <div>
            <label for="item">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ (Optional)</label>
            <input id="item" type="text">
          </div>
          <div>
            <label for="note">‡¶®‡ßã‡¶ü (Optional)</label>
            <input id="note" type="text">
          </div>
          <div class="full" style="display:flex;justify-content:flex-end">
            <button id="confirmBtn" class="btn btn-primary" type="button" disabled>‡¶¨‡ßÅ‡¶ï‡¶ø‡¶Ç ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ</button>
          </div>
        </div>
      </form>

      <div class="response" id="response">
        <div class="muted">‡¶è‡¶ñ‡¶æ‡¶®‡ßá Steadfast api ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶∏‡¶æ ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡ßç‡¶∏ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá...</div>
      </div>
    </section>
	
	<hr/>
	<div class="muted">Disclaimer: This is not an official Steadfast project.</div>
	</div>
  
    <footer>
	<div class="footer-links" style="margin-top:15px">
        <a href="https://tools.sukkarshop.com" class="footer-link">üõ†Ô∏è Tools Main</a> | 
        <a href="https://sukkarshop.com" class="footer-link">üèöÔ∏è Main Site</a> | 
        <a href="https://facebook.com/sukkar.shop" class="footer-link"> Contact </a> | 
        <a href="https://github.com/almahmudbd/steadfast-easy-booking/" class="footer-link"> Help </a>
	</div>
	<p class="copyright">Steadfast Easy Booking Tool v2.1  |  Powered by sukkarshop.com</p>
    </footer>
	<br/>
  </div>

  <script>
    const LS_KEY = 'steadfastApiKey';
    const LS_SECRET = 'steadfastSecretKey';

    const el = (id) => document.getElementById(id);

    function cleanNumberString(str){ 
      if(!str) return ''; 
      let cleaned = String(str).replace(/[^\d‡ß¶-‡ßØ]/g,''); 
      const bn=['‡ß¶','‡ßß','‡ß®','‡ß©','‡ß™','‡ß´','‡ß¨','‡ß≠','‡ßÆ','‡ßØ'], en=['0','1','2','3','4','5','6','7','8','9'];
      for(let i=0;i<bn.length;i++) cleaned = cleaned.replace(new RegExp(bn[i],'g'), en[i]); 
      if(cleaned.startsWith('880')) cleaned = cleaned.substring(2);
      return cleaned; 
    }

    function cleanLabels(str) {
      if(!str) return '';
      return str.replace(/^(‡¶®‡¶æ‡¶Æ|Name|‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ|Address|Adress|‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤|Mobile|Phone|Ph|‡¶ü‡¶æ‡¶ï‡¶æ|TK|Amount|COD|Price|‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶®|Cash on|‡¶¨‡¶æ‡¶ï‡¶ø)[:\-\s]*/gi, '').trim();
    }

    function parseMessage(msg){ 
      const lines = msg.split('\n').map(l=>l.trim()).filter(Boolean);
      if(lines.length < 2) return null;

      let name = '', addrParts = [], phone = '', cod = 0;
      let phoneIndex = -1;

      // ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ (‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø ‡¶´‡¶ø‡¶≤‡ßç‡¶°)
      for(let i=0; i<lines.length; i++) {
        const numOnly = cleanNumberString(lines[i]);
        if(/^01[3-9]\d{8}$/.test(numOnly)) {
          phone = numOnly;
          phoneIndex = i;
          break;
        }
      }

      if(phoneIndex !== -1) {
        // ‡¶®‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡ßá
        name = cleanLabels(lines[0]);

        // ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶ø‡¶ì‡¶°‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ
        for(let j=0; j<lines.length; j++) {
          if(j === phoneIndex) continue; // ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶∏‡ßç‡¶ï‡¶ø‡¶™
          
          const line = lines[j];
          const isCodLine = /(?:‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶®|‡¶¨‡¶æ‡¶ï‡¶ø|Cash on|Amount|COD|‡ß≥|‡¶ü‡¶æ‡¶ï‡¶æ|TK)/i.test(line);

          if(isCodLine) {
            const num = cleanNumberString(line);
            if(num && num.length < 6) {
              cod = parseInt(num);
              continue;
            }
          }

          // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≤‡¶æ‡¶á‡¶® (‡¶®‡¶æ‡¶Æ) ‡¶®‡¶æ ‡¶π‡¶≤‡ßá ‡¶è‡¶¨‡¶Ç ‡¶´‡ßã‡¶® ‡¶®‡¶æ ‡¶π‡¶≤‡ßá ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ‡ßü ‡¶Ø‡¶æ‡¶¨‡ßá
          if(j !== 0) {
             const cleanedAddr = cleanLabels(line);
             if(cleanedAddr) addrParts.push(cleanedAddr);
          }
        }
      } else {
        // ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶®‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶ó‡ßá‡¶≤‡ßá ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡ß© ‡¶≤‡¶æ‡¶á‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï
        name = cleanLabels(lines[0]);
        addrParts = [cleanLabels(lines[1])];
        const lastNum = cleanNumberString(lines[lines.length-1]);
        if(lastNum) cod = parseInt(lastNum);
      }

      return { 
        name: name, 
        addr: addrParts.join(', '), 
        phone: phone, 
        cod: cod
      }; 
    }

    function updateConfirmState(){ 
      const hasKeys = !!(localStorage.getItem(LS_KEY) && localStorage.getItem(LS_SECRET));
      const hasData = el('name').value && el('phone').value && el('addr').value;
      el('confirmBtn').disabled = !(hasKeys && hasData); 
    }

    function setKeysVisible(loaded){ 
      if(loaded){ 
        el('keyStatus').className = 'key-status success'; 
        el('keyStatusText').textContent = '‚úÖ API ‡¶ï‡ßÄ ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§'; 
        el('apiKey').value='**********'; el('secretKey').value='**********';
        el('keyDetails').style.display='none'; 
      } else { 
        el('keyStatus').className = 'key-status error'; 
        el('keyStatusText').innerHTML = '‚ùå API ‡¶ï‡ßÄ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á‡•§ <a href="https://steadfast.com.bd/user/api" target="_blank">(‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßÅ‡¶®)</a>'; 
        el('keyDetails').style.display='block'; 
      } 
      updateConfirmState(); 
    }

    el('saveKeyBtn').onclick = () => { 
      const k=el('apiKey').value.trim(), s=el('secretKey').value.trim();
      if(k && s && !k.includes('*')){ 
        localStorage.setItem(LS_KEY,k); localStorage.setItem(LS_SECRET,s); setKeysVisible(true); 
      } else alert('‡¶∏‡¶†‡¶ø‡¶ï ‡¶ï‡ßÄ ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
    };

    el('clearKeyBtn').onclick = () => { 
        if(confirm('‡¶ï‡ßÄ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
            localStorage.removeItem(LS_KEY); localStorage.removeItem(LS_SECRET); setKeysVisible(false); 
        }
    };
    el('toggleKeyBtn').onclick = () => { el('keyDetails').style.display = el('keyDetails').style.display==='none' ? 'block' : 'none'; };

    el('processBtn').onclick = () => { 
      const inputVal = el('messageInput').value.trim();
      const parsed = parseMessage(inputVal); 
      
      if(parsed && (parsed.name || parsed.phone)){ 
        el('parseErr').style.display='none'; 
        el('invoice').value='S-'+Date.now().toString().slice(-6); 
        el('name').value=parsed.name; 
        el('addr').value=parsed.addr; 
        el('phone').value=parsed.phone; 
        el('cod').value=parsed.cod || ''; 
        el('item').value=''; // Item empty default
        el('response').innerHTML=''; 
        updateConfirmState(); 
      } else { 
        el('parseErr').style.display='block'; 
        el('confirmBtn').disabled=true; 
      } 
    };

    el('clearMsgBtn').onclick = () => { 
      ['messageInput','invoice','name','addr','phone','cod','item','note'].forEach(id => el(id).value='');
      el('confirmBtn').disabled=true; el('response').innerHTML=''; 
    };

    el('confirmBtn').onclick = async () => {
      const k=localStorage.getItem(LS_KEY), s=localStorage.getItem(LS_SECRET);
      if(!k || !s) return alert('API Key missing');

      const payload={
        invoice: el('invoice').value,
        recipient_name: el('name').value,
        recipient_address: el('addr').value,
        recipient_phone: el('phone').value,
        cod_amount: Number(el('cod').value)||0,
        item_description: el('item').value || '',
        note: el('note').value || ''
      };

      el('response').innerHTML='<div class="muted">‡¶¨‡ßÅ‡¶ï‡¶ø‡¶Ç ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...</div>';
      el('confirmBtn').disabled = true;

      try{
        const res=await fetch('https://portal.packzy.com/api/v1/create_order',{
          method:'POST',
          headers:{ 'Content-Type':'application/json', 'Api-Key': k, 'Secret-Key': s },
          body:JSON.stringify(payload)
        });
        const j=await res.json();
        
        if(j.status===200){
          const cid=j.consignment?.consignment_id;
          const track=j.consignment?.tracking_code;
          el('response').innerHTML=`
            <div class="key-status success"><div class="text">‚úÖ ‡¶¨‡ßÅ‡¶ï‡¶ø‡¶Ç ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!</div></div>
            <h6><span class='copyable'>Parcel Id : #${cid}</span><button class='btn btn-secondary' onclick="copyToClipboard('${cid}')">Copy</button></h6>
            <h6><span class='copyable'>Tracking: ${track}</span><a class='btn btn-secondary' target='_blank' href='https://steadfast.com.bd/t/${track}'>View</a></h6>
          `;
        } else {
          el('response').innerHTML=`<div style="color:var(--danger)">‚ùå ‡¶¨‡ßÅ‡¶ï‡¶ø‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${j.errors || j.message || 'API Error'}</div>`;
        }
      } catch(e){ 
        el('response').innerHTML='<div style="color:var(--danger)">‚ùå ‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶¨‡¶æ CORS ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡•§</div>'; 
      } finally {
        el('confirmBtn').disabled = false;
      }
    };

    window.copyToClipboard = (txt) => {
        const dummy = document.createElement("textarea");
        document.body.appendChild(dummy);
        dummy.value = txt;
        dummy.select();
        document.execCommand("copy");
        document.body.removeChild(dummy);
        const msg = document.createElement('div');
        msg.innerHTML = "‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!";
        msg.style.cssText = "position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#333; color:#fff; padding:10px 20px; border-radius:5px; z-index:9999;";
        document.body.appendChild(msg);
        setTimeout(() => msg.remove(), 2000);
    };

    setKeysVisible(!!(localStorage.getItem(LS_KEY) && localStorage.getItem(LS_SECRET)));
  </script>
</body>
</html>